<!DOCTYPE html>
<html lang="en">
<head>
    <title>Honeycomb</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../static/css/style.css">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
            integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
            crossorigin="anonymous"></script>
    <script type=text/javascript>
        function initReq() {
            $.ajax({
                url: '/loadPlaylists',
                type: 'GET',
                success: function (data) {
                    $("#covers").html(data.result);
                }
            });
        }
    </script>
    <script>
        function conf_change_back() {
            $("#conf").html('<div class="alert alert-success" role="alert">Successfully created Honeycomb playlist' +
                            '        <button class="btn close" id="playNew">Play</button>' +
                            '</div>');
            $("#conf").attr('hidden', 'true');
        }
    </script>
    <script type=text/javascript>
        $(function () {
            $('#connect').click(function () {
                $.ajax({
                    url: '/connect',
                    type: 'GET',
                    success: function (data) {
                        $("#connect").text('Connected');
                        $("#connect").attr('disabled', 'true');
                        $("#connect").css('background-color', 'green');
                        $("#loadPlaylists").removeAttr('hidden');
                        // send post request to /loadPlaylists
                        initReq();
                    }
                });
            });
            $('#loadPlaylists').click(function () {
                $.ajax({
                    url: '/loadPlaylists',
                    type: 'GET',
                    success: function (data) {
                        $("#covers").html(data.result);
                    }
                });
            });
            $('#playNew').click(function () {
                $.ajax({
                    url: '/playNew',
                    type: 'GET',
                    success: function (data) {
                        $("#conf").html(data.result);
                        setTimeout(conf_change_back, 5000);
                    }
                });
            });
        });
    </script>
    <script type=text/javascript>
        function selectPlaylist(pID) {
            $.ajax({
                url: '/select',
                data: {'plID': pID},
                type: 'GET',
                success: function (data) {
                    $('#result').html(data);
                    $('#conf').removeAttr('hidden');
                    setTimeout(conf_change_back, 7500);
                }
            });
        }
    </script>
</head>
<body>
<div class="container" id="header" align="center">
    <h1><img src="../static/imgs/logo_big.png" width="50" style="vertical-align: text-bottom">Honeycomb</h1>
</div>
<hr>
<div class="container" id="buttons" align="center">
    <button class="btn" id="connect" style="background-color: orange;">Connect to Spotify</button>
    <button class="btn" id="loadPlaylists" hidden>Next page</button>
</div>
<div class="container" id="coverContainer">
    <span id="covers"></span>
</div>
<div class="container" id="conf" hidden>
    <div class="alert alert-success" role="alert">Successfully created Honeycomb playlist
        <button class="btn close" id="playNew">Play</button>
    </div>
</div>
<div class="footer">
    <h6>Created by <a href="https://github.com/jckbr">jckbr</a> and <a
            href="https://github.com/NoahMaceri">NoahMaceri</a>, all rights reserved 2023</h6>
    <p class="footerText">No information is stored using this app. License and source code available at <a
            href="https://github.com/jckbr/honeycomb">GitHub</a></p>
</div>
</body>
</html>